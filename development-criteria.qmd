# Understanding the Development Criteria

```{r}
#| include: false
source("R/common.R")
```

## Why These Factors Matter

The development potential score is calculated using seven key criteria, each weighted according to its importance in determining development viability. Our scoring methodology reflects decades of real estate development experience and incorporates both market realities and mission-aligned priorities. Each criterion was selected to balance financial viability with community impact, ensuring that recommended properties can support sustainable development while serving congregational needs.

### Property Size: The Goldilocks Principle

**Weight: 20%**

::: {.column-margin}
**Optimal Range**: 0.5-5 acres

Properties that are "just right" for development.
:::

Not too small to be economically viable, not too large to be financially unwieldy.

```{r}
#| label: fig-size-scoring
#| fig-cap: "Property Size Scoring Curve"
#| fig-height: 4
#| echo: false

# Create scoring function
calculate_size_score <- function(size) {
  case_when(
    size < 0.25 ~ 20,
    size < 0.5 ~ 50,
    size < 1 ~ 70,
    size < 2 ~ 90,
    size < 5 ~ 100,
    size < 10 ~ 85,
    TRUE ~ 70
  )
}

# Generate curve data
size_curve <- tibble(
  acres = seq(0, 15, 0.1),
  score = calculate_size_score(acres)
)

# Plot the scoring curve
ggplot(size_curve, aes(x = acres, y = score)) +
  geom_line(color = "#445ca9", linewidth = 1.2) +
  geom_area(alpha = 0.2, fill = "#445ca9") +
  annotate("rect", xmin = 0.5, xmax = 5, ymin = 0, ymax = 100,
           alpha = 0.1, fill = "#8baeaa") +
  annotate("text", x = 2.75, y = 50, label = "Optimal\nRange", 
           color = "#333", size = 4, fontface = "italic") +
  scale_x_continuous(breaks = seq(0, 15, 2.5)) +
  labs(
    title = "Property Size Scoring Curve",
    x = "Property Size (Acres)",
    y = "Score (0-100)"
  ) +
  theme_minimal(base_size = 12) +
  theme(
    plot.title = element_text(face = "bold", color = "#445ca9"),
    panel.grid.minor = element_blank()
  )
```

```{r}
#| label: fig-size-distribution
#| fig-cap: "Distribution of Property Sizes in Portfolio"
#| fig-height: 4
#| echo: false

property_profile |>
  filter(!is.na(area_acres), area_acres < 20) |>
  ggplot(aes(x = area_acres)) +
  geom_histogram(binwidth = 0.5, fill = "#445ca9", color = "white", alpha = 0.8) +
  geom_vline(xintercept = c(0.5, 5), linetype = "dashed", color = "#8baeaa", linewidth = 1) +
  annotate("text", x = 2.75, y = Inf, label = "Optimal Range", 
           vjust = 2, color = "#8baeaa", fontface = "bold") +
  labs(
    title = "Property Size Distribution",
    subtitle = "Dashed lines indicate optimal development range (0.5-5 acres)",
    x = "Property Size (Acres)",
    y = "Number of Properties"
  ) +
  theme_minimal(base_size = 12) +
  theme(
    plot.title = element_text(face = "bold", color = "#445ca9")
  )
```

**Why This Matters**:

- **Too small (<0.5 acres)**: Limited development options, high per-unit costs
- **Optimal (0.5-5 acres)**: Maximum flexibility and economic efficiency
- **Too large (>10 acres)**: Requires significant capital, complex phasing

Property size significantly influences development feasibility, but bigger isn't always better. Properties under a quarter-acre typically lack the critical mass needed for financially viable development—construction costs per unit rise sharply, and parking or open space requirements become impossible to meet. Conversely, parcels exceeding 10 acres often present unique challenges: they may require complex phasing, demand substantial upfront capital, or face community resistance to density.

### Current Use: Identifying Low-Hanging Fruit

**Weight: 25%**

::: {.column-margin}
**Optimal Use**: Vacant or nearly vacant with access to infrastructure

:::

Properties with minimal current utilization represent immediate opportunities.

```{r}
#| label: tbl-use-scoring
#| tbl-cap: "Current Use Scoring Matrix"
#| echo: false

use_scoring <- tibble(
  `Current Use` = c("Parking Lot", "Open Space", "Mixed/Other", "Residence", "School", "Church (primary)", "Cemetery"),
  Score = c(95, 90, 60, 40, 35, 30, 5),
  Rationale = c(
    "Immediate development potential, minimal displacement",
    "Low-value use, easy conversion",
    "Varies by specific circumstances",
    "Displacement considerations",
    "Active community use",
    "Core mission function",
    "Restricted use, not developable"
  )
)

use_scoring |>
  kable(align = c("l", "c", "l")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = FALSE) |>
  column_spec(2, bold = TRUE, color = "white", 
              background = spec_color(use_scoring$Score, scale_from = c(0, 100), 
                                      palette = "RdYlGn", direction = 1))
```

```{r}
#| label: fig-use-distribution
#| fig-cap: "Properties by Current Use Type"
#| fig-height: 4
#| echo: false

use_counts <- property_profile |>
  summarise(
    `Parking` = sum(use_parking, na.rm = TRUE),
    `Open Space` = sum(use_open_space, na.rm = TRUE),
    `Church` = sum(use_church, na.rm = TRUE),
    `Residence` = sum(use_residence, na.rm = TRUE),
    `School` = sum(use_school, na.rm = TRUE),
    `Cemetery` = sum(use_cemetery, na.rm = TRUE)
  ) |>
  pivot_longer(everything(), names_to = "Use Type", values_to = "Count") |>
  arrange(desc(Count))

ggplot(use_counts, aes(x = reorder(`Use Type`, Count), y = Count)) +
  geom_col(fill = "#445ca9", alpha = 0.8) +
  geom_text(aes(label = Count), hjust = -0.2, size = 4) +
  coord_flip() +
  scale_y_continuous(expand = expansion(mult = c(0, 0.15))) +
  labs(
    title = "Properties by Use Type",
    x = "",
    y = "Number of Properties"
  ) +
  theme_minimal(base_size = 12) +
  theme(
    plot.title = element_text(face = "bold", color = "#445ca9"),
    panel.grid.major.y = element_blank()
  )
```

**Highest Potential: Parking Lots and Open Space**

Not all church property serves its highest and best use. Surface parking lots represent prime redevelopment opportunities—they're already cleared and graded, typically have minimal environmental constraints, and often sit underutilized six days per week. A parking lot that serves 200 congregants on Sunday morning but stands empty Monday through Saturday represents an enormous opportunity cost.

Open space scores similarly high, particularly when it's amenity-free lawn rather than programmed recreation or memorial gardens. These properties can be reimagined while potentially retaining some green space within new development.

### Location Quality: Following the Market

**Weight: 20%**

```{r}
#| label: fig-location-factors
#| fig-cap: "Location Quality Components"
#| fig-height: 3.5
#| echo: false

location_factors <- tibble(
  Factor = c("Transit Access", "Walkability", "Employment Proximity", "Amenities"),
  Weight = c(30, 35, 20, 15),
  Description = c("Distance to bus/rail", "Walk Score index", "Jobs within 3 miles", "Retail, schools, services")
)

ggplot(location_factors, aes(x = reorder(Factor, Weight), y = Weight)) +
  geom_col(fill = "#8baeaa", alpha = 0.9) +
  geom_text(aes(label = paste0(Weight, "%")), hjust = -0.2, size = 4, fontface = "bold") +
  coord_flip() +
  scale_y_continuous(limits = c(0, 45)) +
  labs(
    title = "Location Score Components",
    x = "",
    y = "Weight in Location Score"
  ) +
  theme_minimal(base_size = 12) +
  theme(
    plot.title = element_text(face = "bold", color = "#445ca9"),
    panel.grid.major.y = element_blank()
  )
```

```{r}
#| label: fig-walkability-dist
#| fig-cap: "Distribution of Walkability Scores"
#| fig-height: 4
#| echo: false

property_profile |>
  filter(!is.na(walk_idx)) |>
  ggplot(aes(x = walk_idx)) +
  geom_histogram(binwidth = 5, fill = "#8baeaa", color = "white", alpha = 0.8) +
  geom_vline(xintercept = median(property_profile$walk_idx, na.rm = TRUE), 
             linetype = "dashed", color = "#e76f52", linewidth = 1) +
  annotate("text", x = median(property_profile$walk_idx, na.rm = TRUE) + 2, 
           y = Inf, label = "Median", vjust = 2, hjust = 0, color = "#e76f52") +
  labs(
    title = "Walkability Score Distribution",
    x = "Walkability Index",
    y = "Number of Properties"
  ) +
  theme_minimal(base_size = 12) +
  theme(
    plot.title = element_text(face = "bold", color = "#445ca9")
  )
```

**Key Metrics: Walkability Score and Transit Access**

Real estate development fundamentally responds to location. A walkable, transit-rich site commands higher rents, attracts more diverse tenants, and often qualifies for density bonuses or reduced parking requirements—all factors that improve project economics.

Walkability scores measure proximity to everyday needs: grocery stores, schools, employment centers, healthcare. High walkability (15-20 on our scale) indicates a property can support car-light or car-free households, expanding the potential tenant base to include young professionals, seniors aging in place, and lower-income families for whom car ownership is cost-prohibitive.

Transit access amplifies these benefits. Properties within a quarter-mile of frequent bus service or half-mile of rail stations can often negotiate reduced parking requirements with municipalities—a significant cost savings when structured parking runs \$25,000-\$40,000 per space to construct.


### Financial Need: Aligning Development with Mission

**Weight: 15%**

```{r}
#| label: fig-financial-need
#| fig-cap: "Properties by Financial Need Level"
#| fig-height: 4
#| echo: false

financial_summary <- property_profile |>
  filter(!is.na(pct_change_pledge)) |>
  mutate(
    financial_category = case_when(
      pct_change_pledge < -20 ~ "High Need (>20% decline)",
      pct_change_pledge < 0 ~ "Moderate Need (0-20% decline)",
      pct_change_pledge >= 0 ~ "Stable/Growing"
    )
  ) |>
  count(financial_category) |>
  mutate(
    pct = n / sum(n) * 100,
    color = case_when(
      str_detect(financial_category, "High") ~ "#e76f52",
      str_detect(financial_category, "Moderate") ~ "#e9ab3f",
      TRUE ~ "#8baeaa"
    )
  )

ggplot(financial_summary, aes(x = reorder(financial_category, -n), y = n, fill = color)) +
  geom_col() +
  geom_text(aes(label = paste0(n, " (", round(pct, 1), "%)")), 
            vjust = -0.5, size = 4) +
  scale_fill_identity() +
  scale_y_continuous(expand = expansion(mult = c(0, 0.15))) +
  labs(
    title = "Congregation Financial Health",
    subtitle = "Based on 10-year pledge trends",
    x = "",
    y = "Number of Properties"
  ) +
  theme_minimal(base_size = 12) +
  theme(
    plot.title = element_text(face = "bold", color = "#445ca9"),
    axis.text.x = element_text(angle = 15, hjust = 1),
    panel.grid.major.x = element_blank()
  )
```

**Priority: Congregations with Declining Resources**

This criterion explicitly centers mission over pure market return. Congregations experiencing sustained pledge declines often face a difficult reality: their historic buildings demand expensive maintenance, but shrinking budgets make upkeep increasingly burdensome. Many such congregations sit on valuable real estate that could, through thoughtful development, generate steady income streams while maintaining their worship and ministry.

A ground lease arrangement, for example, might provide a struggling congregation with \$50,000-\$150,000 annually in stable income—enough to fund a part-time rector, maintain the building, and sustain core ministries. This approach transforms real estate from a drain on resources into a mission enabler.

Properties associated with growing congregations score lower not because they lack development potential, but because the urgency is less acute. These communities likely have more options and less immediate financial pressure.

### Market Potential: Reading Economic Signals

**Weight: 10%**

```{r}
#| label: tbl-market-indicators
#| tbl-cap: "Market Potential Scoring Criteria"
#| echo: false

market_indicators <- tibble(
  Indicator = c("QCT Status", "Area Median Income", "Population Growth", "Housing Demand"),
  Weight = c("40%", "30%", "15%", "15%"),
  `High Score` = c("In Qualified Census Tract", ">$75,000 AMI", ">2% annual growth", "High demand market"),
  `Data Source` = c("HUD QCT Maps", "ACS 5-Year", "Census", "Local market data")
)

market_indicators |>
  kable(align = c("l", "c", "l", "l")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE)
```

**Indicator: Area Median Income and LIHTC Eligibility**

Development must respond to market demand. Properties in higher-income areas (median incomes above \$75,000) typically support market-rate housing, ground-floor retail, or mixed-use projects that can cross-subsidize affordable components. These projects attract conventional financing and a broader range of development partners.

Properties in Qualified Census Tracts (QCTs) gain additional scoring weight because they unlock Low-Income Housing Tax Credit (LIHTC) financing—the nation's primary mechanism for affordable housing production. LIHTC projects in QCTs receive point advantages in competitive funding rounds, improving their feasibility. For mission-driven institutions committed to affordable housing, QCT properties offer a rare alignment of social impact and financial viability.

### Zoning: Navigating Regulatory Reality

**Weight: 10%**

```{r}
#| label: tbl-zoning-scoring
#| tbl-cap: "Zoning Category Scoring"
#| echo: false

zoning_scoring <- tibble(
  `Zoning Category` = c("Mixed Use", "Multi-Family Residential", "Commercial", "Single-Family Residential", "Agricultural", "Conservation"),
  Score = c(90, 85, 70, 50, 40, 10),
  `Development Impact` = c(
    "Maximum flexibility for housing + retail",
    "Aligned with housing mission",
    "May require use variance for residential",
    "Density limitations, rezoning often needed",
    "Significant restrictions, rural areas",
    "Severe limitations, unlikely candidate"
  )
)

zoning_scoring |>
  kable(align = c("l", "c", "l")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE) |>
  column_spec(2, bold = TRUE)
```

**Favorable: Mixed-Use, Commercial, and Residential Districts**

Zoning powerfully shapes what's buildable and how quickly projects move from concept to construction. Properties zoned for residential or mixed-use development typically offer by-right development opportunities—projects that don't require lengthy rezoning processes, conditional use permits, or special exceptions.

Conversely, properties in restrictive single-family or conservation districts may require multi-year regulatory processes, neighborhood opposition, and uncertain outcomes. While such projects occasionally succeed, they demand patient capital and sophisticated development partners.

### Environmental and Regulatory Constraints: Deal-Breakers vs. Speed-Bumps

**Weight: 5% (applied as penalties)**

```{r}
#| label: tbl-constraints
#| tbl-cap: "Constraint Penalties Applied to Development Score"
#| echo: false

constraints <- tibble(
  Constraint = c("100-Year Flood Zone", "Significant Wetlands (>25%)", "Easements Present", "Historic District", "Moderate Wetlands (10-25%)"),
  `Score Penalty` = c(-40, -35, -30, -25, -20),
  `Mitigation Difficulty` = c("High", "High", "Moderate", "Moderate", "Low-Moderate"),
  Notes = c(
    "Expensive insurance, elevated construction",
    "Federal/state permitting, mitigation required",
    "May restrict building envelope",
    "Design review, material requirements",
    "Potential buildable area reduction"
  )
)

constraints |>
  kable(align = c("l", "c", "c", "l")) |>
  kable_styling(bootstrap_options = c("striped", "hover"), full_width = TRUE) |>
  column_spec(2, bold = TRUE, color = "#e76f52")
```

::: {.callout-note}
## Assessment Framework

**Deal-Breakers** (Score: 0-30):

- Extensive wetlands covering majority of site
- Active floodway designation
- Conservation easements prohibiting development
- Contaminated sites requiring remediation

**Speed-Bumps** (Score: 60-90):

- Partial flood zone (can design around)
- Historic considerations (design flexibility)
- Minor wetlands (avoidable)
- Standard permitting requirements
:::

These constraints receive substantial score penalties because they materially affect project feasibility and cost. Properties in 100-year floodplains face expensive flood insurance, elevated construction costs, and increasingly cautious lenders post-climate-change. Development in such areas may be technically possible but financially marginal.

Significant wetlands (>25% of parcel) trigger federal and state permitting, potential mitigation requirements, and uncertainty about buildable area. Easements—particularly those held by third parties—can restrict development rights, limit building envelopes, or prevent property subdivision.

Historic district designation doesn't prohibit development but adds layers of design review, material requirements, and timeline uncertainty. Some historic commissions embrace creative contemporary additions; others mandate strict historicism that may conflict with modern construction economics.


## Bringing It All Together

The final Development Potential Score is calculated as:

$$
\text{Score} = \sum_{i=1}^{6} (w_i \times s_i) - \text{Constraint Penalties}
$$

Where:

- $w_i$ = weight of criterion $i$
- $s_i$ = score for criterion $i$ (0-100)

```{r}
#| label: fig-score-components
#| fig-cap: "Development Score Component Weights"
#| fig-height: 4
#| echo: false

components <- tibble(
  Component = c("Current Use", "Property Size", "Location Quality", "Financial Need", "Market Potential", "Zoning"),
  Weight = c(25, 20, 20, 15, 10, 10)
) |>
  arrange(desc(Weight))

ggplot(components, aes(x = reorder(Component, Weight), y = Weight, fill = Weight)) +
  geom_col() +
  geom_text(aes(label = paste0(Weight, "%")), hjust = -0.2, size = 4, fontface = "bold") +
  coord_flip() +
  scale_fill_gradient(low = "#8baeaa", high = "#445ca9") +
  scale_y_continuous(limits = c(0, 32)) +
  labs(
    title = "Weighted Score Components",
    subtitle = "Constraint penalties applied after weighted average",
    x = "",
    y = "Weight (%)"
  ) +
  theme_minimal(base_size = 12) +
  theme(
    plot.title = element_text(face = "bold", color = "#445ca9"),
    panel.grid.major.y = element_blank(),
    legend.position = "none"
  )
```

**Score Interpretation**:

| Score Range | Tier | Description |
|-------------|------|-------------|
| 75-100 | Tier 1 | **High Priority** - Immediate development candidates |
| 60-74 | Tier 2 | **Strong Potential** - Near-term opportunities |
| 45-59 | Tier 3 | **Moderate Potential** - Requires creative solutions |
| 30-44 | Tier 4 | **Limited Potential** - Significant barriers exist |
| <30 | Tier 5 | **Not Recommended** - Unsuitable for development |

These six criteria, combined with constraint penalties, create a holistic picture of development potential. A property might score exceptionally well on size and location but face significant challenges from environmental constraints. Another might have modest physical attributes but represent an urgent opportunity to support a financially stressed congregation.

The weighted scoring system allows us to compare apples to oranges—to evaluate whether a small, perfectly-located property in a historic district outweighs a larger, unrestricted site with less market demand. This methodology doesn't make decisions for stakeholders but rather creates a common language for discussing trade-offs and priorities.

Ultimately, successful church real estate development requires more than high scores. It demands patient capital, mission-aligned partners, engaged congregations, and creative design. But by systematically evaluating these criteria, we can identify the properties where stars align—where market demand, congregational need, and regulatory environment converge to create genuine opportunity.
